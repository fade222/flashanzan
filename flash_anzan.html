<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Flash Anzan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/fa.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat"
      rel="stylesheet"
    />
    <title>Flash Anzan</title>
  </head>

  <body>
    <div class="stop">
      <a value="stopAndRestart" class="stopAndRestart">RESET</a>
    </div>
    <h1>Flash Anzan</h1>
    <div class="select" id="select">
      <div class="form">
        <div class="radio-title">Digits</div>
        <div class="radio-group">
          <div class="checkbox-group">
            <input
              type="radio"
              id="digit1"
              checked="checked"
              name="digits"
              value="1"
            />
            <label for="digits1" class="container">1</label>
          </div>
          <div class="checkbox-group">
            <input type="radio" id="digit2" name="digits" value="2" />
            <label for="digits2" class="container">2</label>
          </div>
          <div class="checkbox-group">
            <input type="radio" id="digit3" name="digits" value="3" />
            <label for="digits3" class="container">3</label>
          </div>
          <div class="checkbox-group">
            <input type="radio" id="digit4" name="digits" value="4" />
            <label for="digits4" class="container">4</label>
          </div>
        </div>
      </div>

      <div class="radio-title">Speed</div>
      <div class="radio-group">
        <div class="checkbox-group">
          <input
            type="radio"
            id="speed2"
            name="speedSelect"
            value="0.05"
            checked="checked"
          />
          <label for="speed2" class="container">0.005</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="speed2"
            name="speedSelect"
            value="0.1"
            checked="checked"
          />
          <label for="speed2" class="container">0.01</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="speed2"
            name="speedSelect"
            value="0.25"
            checked="checked"
          />
          <label for="speed2" class="container">0.025</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="speed2"
            name="speedSelect"
            value="0.5"
            checked="checked"
          />
          <label for="speed2" class="container">0.05</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="speed2"
            name="speedSelect"
            value="1"
            checked="checked"
          />
          <label for="speed2" class="container">0.1</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="speed2"
            name="speedSelect"
            value="1.25"
            checked="checked"
          />
          <label for="speed2" class="container">0.125</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="speed2"
            name="speedSelect"
            value="1.5"
            checked="checked"
          />
          <label for="speed2" class="container">0.15</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="speed3" name="speedSelect" value="2" />
          <label for="speed3" class="container">0.2</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="speed4" name="speedSelect" value="2.5" />
          <label for="speed4" class="container">0.25</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="speed4" name="speedSelect" value="3" />
          <label for="speed5" class="container">0.3</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="speed4" name="speedSelect" value="3.5" />
          <label for="speed6" class="container">0.35</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="speed4" name="speedSelect" value="4" />
          <label for="speed6" class="container">0.4</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="speed4" name="speedSelect" value="4.5" />
          <label for="speed6" class="container">0.45</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="speed4" name="speedSelect" value="5" />
          <label for="speed6" class="container">0.5</label>
        </div>
      </div>

      <div class="radio-title">Questions</div>
      <div class="radio-group">
        <div class="checkbox-group">
          <input
            type="radio"
            id="question2"
            name="questionSelect"
            value="1"
            checked="checked"
          />
          <label for="speed2" class="container">1</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="question2"
            name="questionSelect"
            value="2"
            checked="checked"
          />
          <label for="speed2" class="container">2</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="question2"
            name="questionSelect"
            value="3"
            checked="checked"
          />
          <label for="speed2" class="container">3</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="question2"
            name="questionSelect"
            value="4"
            checked="checked"
          />
          <label for="speed2" class="container">4</label>
        </div>
        <div class="checkbox-group">
          <input
            type="radio"
            id="question2"
            name="questionSelect"
            value="5"
            checked="checked"
          />
          <label for="speed2" class="container">5</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="question3" name="questionSelect" value="10" />
          <label for="speed3" class="container">10</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="question4" name="questionSelect" value="15" />
          <label for="speed4" class="container">15</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="question4" name="questionSelect" value="20" />
          <label for="question5" class="container">20</label>
        </div>
        <div class="checkbox-group">
          <input type="radio" id="question4" name="questionSelect" value="25" />
          <label for="question6" class="container">25</label>
        </div>
      </div>

      <div class="btn">
        <button type="submit" value="start" class="start">START</button>
      </div>
    </div>

    <div class="dots">
      <span id="dot1" class="dot1"></span>
      <span id="dot2" class="dot2"></span>
      <span id="dot3" class="dot3"></span>
      <span id="dot4" class="dot4"></span>
    </div>

    <div class="display" id="display"></div>

    <div class="total" id="total"></div>

    <div class="seal">
      <button type="submit" value="reveal" class="reveal">TOTAL</button>
    </div>

    <div class="playAgain btn">
      <button value="restart" class="restart">RESTART</button>
    </div>

    <script>
      // Buttons
      var start = document.querySelector(".start");
      var reveal = document.querySelector(".reveal");
      var playAgain = document.querySelector(".playAgain");
      var stopAndRestart = document.querySelector(".stopAndRestart");
      start.addEventListener("click", beeps);
      reveal.addEventListener("click", add);
      playAgain.addEventListener("click", replay);
      stopAndRestart.addEventListener("click", reloadPage);

      // Hide elements
      document.querySelector(".display").style.display = "none";
      document.querySelector(".total").style.display = "none";
      document.querySelector(".playAgain").style.display = "none";
      document.querySelector(".seal").style.display = "none";
      document.querySelector(".dots").style.display = "none";

      // Countdown
      function beeps() {
        document.getElementById("select").style.display = "none";
        document.querySelector(".dots").style.display = "";
        document.getElementById("dot1").style.visibility = "visible";
        document.getElementById("dot2").style.visibility = "visible";
        document.getElementById("dot3").style.visibility = "visible";
        document.getElementById("dot4").style.visibility = "visible";
        setTimeout(hideDot1, 1000 / 2);
        setTimeout(hideDot2, 2000 / 2);
        setTimeout(hideDot3, 3000 / 2);
        setTimeout(hideDot4, 4000 / 2);
        setTimeout(run, 5000 / 2);
      }

      function hideDot1() {
        document.getElementById("dot1").style.visibility = "hidden";
      }
      function hideDot2() {
        document.getElementById("dot2").style.visibility = "hidden";
      }
      function hideDot3() {
        document.getElementById("dot3").style.visibility = "hidden";
      }
      function hideDot4() {
        document.getElementById("dot4").style.visibility = "hidden";
      }

      // Anzan function
      function run() {
        document.querySelector(".dots").style.display = "none";
        document.querySelector(".display").style.display = "";
        var digits = document.querySelector('input[name="digits"]:checked')
          .value;
        var speed = document.querySelector('input[name="speedSelect"]:checked')
          .value;
        var questions = document.querySelector(
          'input[name="questionSelect"]:checked'
        ).value;

        //  Generate random number array
        var numbers = [];
        while (numbers.length < questions) {
          var num = Math.floor(Math.random() * Math.pow(10, digits) + 1);
          if (num !== numbers[numbers.length - 1]) {
            numbers.push(num);
          }
        }

        // Calculate total
        var sum = numbers.reduce((a, b) => a + b, 0);
        document.getElementById("total").textContent = sum;

        // Calculate speed and display
        for (var i = 0; i < numbers.length + 1; i++) {
          function looping(i, t) {
            setTimeout(function() {
              document.getElementById("display").textContent = numbers[i];
              if (i >= numbers.length) {
                document.querySelector(".display").style.display = "none";
                document.querySelector(".seal").style.display = "";
              }
            }, t * i);
          }
          looping(i, speed * 100);
        }
      }

      // Total
      function add() {
        document.querySelector(".seal").style.display = "none";
        document.querySelector(".total").style.display = "";
        document.querySelector(".playAgain").style.display = "";
      }

      // Restart
      function replay() {
        document.querySelector(".total").style.display = "none";
        document.querySelector(".playAgain").style.display = "none";
        document.getElementById("select").style.display = "";
      }

      // Reload page
      function reloadPage() {
        window.location.reload();
      }
    </script>
  </body>
</html>
